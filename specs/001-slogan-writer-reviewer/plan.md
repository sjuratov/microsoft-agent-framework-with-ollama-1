# Implementation Plan: Iterative Slogan Writer-Reviewer Agent System

**Branch**: `001-slogan-writer-reviewer` | **Date**: 2025-10-19 | **Spec**: [spec.md](./spec.md)  
**Input**: Feature specification from `/specs/001-slogan-writer-reviewer/spec.md`

**Note**: This plan is generated by the `/speckit.plan` command following the SpecKit workflow.

## Summary

Build a multi-agent CLI application using Microsoft Agent Framework and Ollama that enables iterative slogan creation through Writer-Reviewer collaboration. The Writer agent generates slogans based on user input, while the Reviewer agent provides critical feedback or approval ("SHIP IT!"). The system supports up to 5 iteration turns with full visibility into the collaboration process. Architecture designed for future FastAPI extension while maintaining simplicity and code quality per project constitution.

## Technical Context

**Language/Version**: Python 3.11+ (for async/await and modern type hints)

**Primary Dependencies**:

- Microsoft Agent Framework (`agent-framework`) - Multi-agent orchestration
- Ollama Python client (`ollama`) - Local LLM integration
- uv - Fast Python package and environment manager
- Click - CLI framework for command-line interface
- Pydantic - Data validation and settings management

**Storage**: N/A (stateless sessions for initial iteration)

**Testing**: pytest with pytest-asyncio for async test support

**Target Platform**: macOS/Linux/Windows desktop (local machine execution)

**Project Type**: Single project (CLI application with future API extensibility)

**Performance Goals**:

- Complete slogan generation within 5 minutes
- Agent response time dependent on Ollama model performance
- Maximum 5 iteration turns (hard constraint)

**Constraints**:

- Must use local Ollama models only (no cloud API calls)
- Stateless execution (no persistent storage for this iteration)
- CLI-only interface (no GUI or web interface)
- Architecture must support future FastAPI integration without major refactoring

**Scale/Scope**:

- Single-user, local execution
- Two specialized agents (Writer, Reviewer)
- Small codebase (~500-1000 LOC estimated)
- MVP feature set (3 user stories: P1 core, P2 visibility, P3 configuration)

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Code Quality Principle ✅ PASS

- **Documentation**: All agents, workflows, and CLI commands will be documented with docstrings
- **Type Hints**: Python type hints enforced for all functions and classes
- **Linting**: Ruff configured for code quality checks
- **Code Review**: Small, focused PRs per user story enable effective review
- **Testing**: pytest coverage for agent interactions and CLI commands

**Justification**: Architecture supports incremental development with clear separation of concerns (agents, workflow orchestration, CLI layer).

### Simplicity Principle ✅ PASS

- **YAGNI Applied**: Only implementing P1 (core functionality) initially; P2/P3 are enhancements
- **Minimal Dependencies**: Using only essential libraries (Agent Framework, Ollama, Click)
- **No Premature Optimization**: Straightforward sequential workflow for agent interaction
- **Clear Architecture**: Three-layer design (CLI → Orchestration → Agents)
- **No Over-Engineering**: Stateless design for MVP; persistence deferred to future iterations

**Justification**: Two agents with simple handoff logic. No complex state management, no unnecessary abstractions. Future FastAPI extension accommodated through clean separation of CLI and business logic.

### Development Workflow ✅ PASS

- **Incremental Development**: Three prioritized user stories enable independent development
- **Small PRs**: Each user story can be implemented and merged separately
- **Testability**: Agent interactions testable in isolation; integration tests for full workflow

**Verdict**: ✅ **ALL GATES PASSED** - Proceed to Phase 0 Research

## Project Structure

### Documentation (this feature)

```text
specs/001-slogan-writer-reviewer/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
│   └── cli-interface.md # CLI command specifications
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
src/
├── __init__.py
├── agents/              # Agent definitions
│   ├── __init__.py
│   ├── writer.py       # Writer agent implementation
│   └── reviewer.py     # Reviewer agent implementation
├── orchestration/       # Workflow orchestration
│   ├── __init__.py
│   ├── workflow.py     # Writer-Reviewer workflow coordination
│   └── models.py       # Data models (Turn, IterationResult, etc.)
├── cli/                 # Command-line interface
│   ├── __init__.py
│   ├── main.py         # CLI entry point and commands
│   └── output.py       # Output formatting and display
└── config/              # Configuration management
    ├── __init__.py
    └── settings.py     # Ollama connection, model settings

tests/
├── __init__.py
├── unit/                # Unit tests
│   ├── test_agents.py
│   ├── test_workflow.py
│   └── test_cli.py
└── integration/         # Integration tests
    └── test_end_to_end.py

pyproject.toml           # uv project configuration
README.md                # Project documentation and setup
.python-version          # Python version for uv
```

**Structure Decision**: Single project structure selected as this is a CLI application with clear separation of concerns (agents, orchestration, CLI). The three-layer architecture (CLI → Orchestration → Agents) enables future FastAPI extension by reusing the orchestration and agents layers while adding a new API layer alongside the CLI layer.

## Complexity Tracking

**No violations** - Constitution Check passed all gates. No complexity justifications required.

